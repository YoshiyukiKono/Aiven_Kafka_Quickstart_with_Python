# Python Kafkaプロデューサー

## 概要

Aiven Kafkaクラスターへのデータフィードを行うシミュレーション用のプログラムを作成します。
プログラムは、Kafka Producerの役割を持ちます。今回のチュートリアルでは、AivenのKafkaトピックに送信されたデータの確認は、Aiven Webコンソールの機能を利用して行うため、Kafka Consumerの作成は行いません。

## データ

[HASC(Human Activity Sensing Consortium)](http://hasc.jp/)が提供するオープンデータを利用します。

HASCは、人間行動理解のための装着型センサによる大規模データベース構築を目的とするコンソーシアムです。

「[2010corpus](http://hasc.jp/hc2010/HASC2010corpus/hasc2010corpus.html)」ダウンロードすることのできる加速度データのひとつ(HASC1001.csv)を利用します。

## 仕様

シミュレーターは、Kafkaトピックに対して、JSON形式のメッセージを送信します。

### センサーデータ

csv形式のデータは以下の内容を持ちます（ヘッダーは含まれていません）。

```
[検測時刻(sec)],[X軸(G)],[Y軸(G)],[Z軸(G)]
```

### メタデータ

センサーデータに加えて、以下のメタデータを含めます。

- メッセージID(UUID)
- 送信時刻

## プログラム解説

チュートリアルは、Pythonプログラム([producer.py](../producer/producer.py))を提供します。

### Aiven Kafka接続情報編集

プログラムを利用する場合、Aiven Kafkaクラスターへの接続情報を編集する必要があります。


また、以前のステップで取得した下記のファイルを利用します。producer.pyと同じ場所に置くか、コードを編集します。



## 実行と終了

実行すると以下の様に、コンソールに送信するメッセージが表示されます。


シミュレーションを終了するには、Ctrl+Cを入力します。

[目次へ戻る](./contents_ja.md)
